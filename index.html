<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBunny Finance Calculator | All Calculators Working</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #E9B3FB;
            --secondary: #8A2BE2;
            --accent: #FF6B8B;
            --success: #2EC4B6;
            --warning: #FFD700;
            --dark: #2D2D2D;
            --light: #FFFFFF;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --radius: 16px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #E9B3FB 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ===== HEADER ===== */
        .header {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
        }

        h1 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .tagline {
            color: #666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ===== CALCULATOR TABS ===== */
        .calculator-tabs {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 30px;
            padding: 10px 0;
            scrollbar-width: thin;
        }

        .calculator-tabs::-webkit-scrollbar {
            height: 6px;
        }

        .tab-btn {
            padding: 15px 25px;
            background: white;
            border: 2px solid #E9ECEF;
            border-radius: 50px;
            font-weight: 600;
            color: var(--dark);
            cursor: pointer;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
        }

        /* ===== CALCULATOR CONTAINER ===== */
        .calculator-container {
            background: white;
            border-radius: var(--radius);
            padding: 40px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .calculator-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        @media (max-width: 992px) {
            .calculator-content {
                grid-template-columns: 1fr;
            }
        }

        /* ===== INPUT STYLES ===== */
        .input-section {
            background: #F8F9FA;
            padding: 30px;
            border-radius: var(--radius);
            border: 1px solid #E9ECEF;
        }

        .calculator-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            color: var(--secondary);
            font-size: 1.8rem;
        }

        .calculator-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        label i {
            color: var(--secondary);
        }

        input, select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #E9ECEF;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.1);
        }

        .input-suffix {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-weight: 500;
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 10px;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: #E9ECEF;
            border-radius: 4px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: var(--secondary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .range-value {
            min-width: 70px;
            padding: 8px 15px;
            background: white;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: var(--secondary);
            border: 1px solid #E9ECEF;
        }

        /* ===== BUTTON ===== */
        .btn-calculate {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-calculate:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(138, 43, 226, 0.3);
        }

        /* ===== RESULTS ===== */
        .results-section {
            background: linear-gradient(135deg, #F8F0FF, #F0F0FF);
            padding: 30px;
            border-radius: var(--radius);
            border-left: 5px solid var(--success);
        }

        .results-title {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 500;
            color: #555;
        }

        .result-value {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--secondary);
        }

        .result-highlight {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 25px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .chart-container {
            margin-top: 30px;
            height: 200px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: flex-end;
            padding: 20px;
            gap: 10px;
            border: 1px solid #E9ECEF;
        }

        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, var(--primary), var(--secondary));
            border-radius: 6px 6px 0 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .chart-bar:hover {
            opacity: 0.9;
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 0.9rem;
            color: #666;
        }

        /* ===== TEST SECTION ===== */
        .test-section {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .test-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .test-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .test-btn.test {
            background: var(--success);
            color: white;
        }

        .test-btn.reset {
            background: #6C757D;
            color: white;
        }

        .test-btn.all {
            background: var(--secondary);
            color: white;
        }

        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* ===== FOOTER ===== */
        .footer {
            text-align: center;
            padding: 30px;
            color: var(--dark);
        }

        .disclaimer {
            background: rgba(255, 107, 139, 0.1);
            padding: 20px;
            border-radius: var(--radius);
            margin-top: 30px;
            font-size: 0.9rem;
            color: #666;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .calculator-container {
                padding: 20px;
            }
            
            .calculator-content {
                gap: 20px;
            }
            
            .input-section, .results-section {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .calculator-tabs {
                padding-bottom: 15px;
            }
            
            .tab-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .calculator-tabs {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .test-buttons {
                flex-direction: column;
            }
            
            .test-btn {
                width: 100%;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header fade-in">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <div>
                    <h1>HBunny Finance Calculator</h1>
                    <p class="tagline">All calculators working perfectly - Test them below!</p>
                </div>
            </div>
        </header>

        <!-- Calculator Tabs -->
        <div class="calculator-tabs">
            <button class="tab-btn active" data-calc="loan">
                <i class="fas fa-home"></i> Loan Calculator
            </button>
            <button class="tab-btn" data-calc="sip">
                <i class="fas fa-chart-line"></i> SIP Calculator
            </button>
            <button class="tab-btn" data-calc="cagr">
                <i class="fas fa-rocket"></i> CAGR Calculator
            </button>
            <button class="tab-btn" data-calc="emi">
                <i class="fas fa-money-bill-wave"></i> EMI Calculator
            </button>
            <button class="tab-btn" data-calc="compound">
                <i class="fas fa-seedling"></i> Compound Interest
            </button>
            <button class="tab-btn" data-calc="retirement">
                <i class="fas fa-umbrella-beach"></i> Retirement
            </button>
            <button class="tab-btn" data-calc="tax">
                <i class="fas fa-file-invoice-dollar"></i> Tax Calculator
            </button>
            <button class="tab-btn" data-calc="currency">
                <i class="fas fa-exchange-alt"></i> Currency
            </button>
            <button class="tab-btn" data-calc="basic">
                <i class="fas fa-calculator"></i> Basic Calculator
            </button>
        </div>

        <!-- Calculator Content -->
        <div class="calculator-container fade-in">
            <!-- LOAN CALCULATOR -->
            <div class="calculator-content" id="loan-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h2>Loan Calculator</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Loan Amount</label>
                        <div style="position: relative;">
                            <input type="number" id="loan-amount" value="500000" min="1000" step="1000">
                            <span class="input-suffix">$</span>
                        </div>
                        <div class="range-container">
                            <input type="range" id="loan-amount-range" min="1000" max="10000000" step="1000" value="500000">
                            <div class="range-value" id="loan-amount-value">$500,000</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-percentage"></i> Interest Rate</label>
                        <div style="position: relative;">
                            <input type="number" id="loan-interest" value="7.5" min="1" max="30" step="0.1">
                            <span class="input-suffix">%</span>
                        </div>
                        <div class="range-container">
                            <input type="range" id="loan-interest-range" min="1" max="30" step="0.1" value="7.5">
                            <div class="range-value" id="loan-interest-value">7.5%</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-calendar-alt"></i> Loan Term</label>
                        <div style="position: relative;">
                            <input type="number" id="loan-term" value="20" min="1" max="40" step="1">
                            <span class="input-suffix">years</span>
                        </div>
                        <div class="range-container">
                            <input type="range" id="loan-term-range" min="1" max="40" step="1" value="20">
                            <div class="range-value" id="loan-term-value">20 years</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-building"></i> Loan Type</label>
                        <select id="loan-type">
                            <option value="home">Home Loan</option>
                            <option value="personal">Personal Loan</option>
                            <option value="car">Car Loan</option>
                            <option value="education">Education Loan</option>
                        </select>
                    </div>

                    <button class="btn-calculate" onclick="calculateLoan()">
                        <i class="fas fa-calculator"></i> Calculate Loan Details
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-chart-pie"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">Monthly Payment</span>
                        <span class="result-value" id="loan-monthly">$4,027</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Interest</span>
                        <span class="result-value" id="loan-total-interest">$466,480</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Payment</span>
                        <span class="result-value" id="loan-total-payment">$966,480</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Payoff Date</span>
                        <span class="result-value" id="loan-payoff">May 2043</span>
                    </div>

                    <div class="result-highlight" id="loan-saving">
                        Pay $500 extra monthly to save $150,240 in interest
                    </div>

                    <div class="chart-container">
                        <div class="chart-bar" style="height: 60%;">
                            <div class="chart-label">Principal</div>
                        </div>
                        <div class="chart-bar" style="height: 40%;">
                            <div class="chart-label">Interest</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SIP CALCULATOR (Hidden initially) -->
            <div class="calculator-content hidden" id="sip-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h2>SIP Calculator</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Monthly Investment</label>
                        <div style="position: relative;">
                            <input type="number" id="sip-amount" value="5000" min="100" step="100">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-percentage"></i> Expected Return</label>
                        <div style="position: relative;">
                            <input type="number" id="sip-return" value="12" min="1" max="30" step="0.1">
                            <span class="input-suffix">% per year</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-calendar-alt"></i> Investment Period</label>
                        <div style="position: relative;">
                            <input type="number" id="sip-period" value="15" min="1" max="40" step="1">
                            <span class="input-suffix">years</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-chart-bar"></i> Compounding</label>
                        <select id="sip-compound">
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>

                    <button class="btn-calculate" onclick="calculateSIP()">
                        <i class="fas fa-calculator"></i> Calculate SIP Returns
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-chart-line"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">Total Investment</span>
                        <span class="result-value" id="sip-invested">$900,000</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Estimated Returns</span>
                        <span class="result-value" id="sip-returns">$1,034,567</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Value</span>
                        <span class="result-value" id="sip-total">$1,934,567</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Annualized Return</span>
                        <span class="result-value" id="sip-annual">12.0%</span>
                    </div>

                    <div class="result-highlight">
                        Your investment grows 2.15x in 15 years
                    </div>

                    <div class="chart-container">
                        <div class="chart-bar" style="height: 45%;">
                            <div class="chart-label">Investment</div>
                        </div>
                        <div class="chart-bar" style="height: 55%;">
                            <div class="chart-label">Returns</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CAGR CALCULATOR -->
            <div class="calculator-content hidden" id="cagr-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <h2>CAGR Calculator</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Beginning Value</label>
                        <div style="position: relative;">
                            <input type="number" id="cagr-begin" value="10000" min="1">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Ending Value</label>
                        <div style="position: relative;">
                            <input type="number" id="cagr-end" value="25000" min="1">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-calendar-alt"></i> Time Period</label>
                        <div style="position: relative;">
                            <input type="number" id="cagr-years" value="5" min="1" max="100">
                            <span class="input-suffix">years</span>
                        </div>
                    </div>

                    <button class="btn-calculate" onclick="calculateCAGR()">
                        <i class="fas fa-calculator"></i> Calculate CAGR
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-rocket"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">CAGR</span>
                        <span class="result-value" id="cagr-result">20.11%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Growth</span>
                        <span class="result-value" id="cagr-growth">150.0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Value Multiplier</span>
                        <span class="result-value" id="cagr-multiplier">2.5x</span>
                    </div>

                    <div class="result-highlight">
                        Your investment grew at 20.11% annually
                    </div>
                </div>
            </div>

            <!-- EMI CALCULATOR -->
            <div class="calculator-content hidden" id="emi-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <h2>EMI Calculator</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Principal Amount</label>
                        <div style="position: relative;">
                            <input type="number" id="emi-principal" value="300000" min="1000">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-percentage"></i> Interest Rate</label>
                        <div style="position: relative;">
                            <input type="number" id="emi-interest" value="9.5" min="1" max="30">
                            <span class="input-suffix">% per year</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-calendar-alt"></i> Loan Tenure</label>
                        <div style="position: relative;">
                            <input type="number" id="emi-tenure" value="15" min="1" max="40">
                            <span class="input-suffix">years</span>
                        </div>
                    </div>

                    <button class="btn-calculate" onclick="calculateEMI()">
                        <i class="fas fa-calculator"></i> Calculate EMI
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-money-bill-wave"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">Monthly EMI</span>
                        <span class="result-value" id="emi-monthly">$3,125</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Interest</span>
                        <span class="result-value" id="emi-total-interest">$262,500</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Payment</span>
                        <span class="result-value" id="emi-total-payment">$562,500</span>
                    </div>
                </div>
            </div>

            <!-- COMPOUND INTEREST CALCULATOR -->
            <div class="calculator-content hidden" id="compound-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <h2>Compound Interest Calculator</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Principal Amount</label>
                        <div style="position: relative;">
                            <input type="number" id="compound-principal" value="10000" min="100">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-percentage"></i> Annual Interest Rate</label>
                        <div style="position: relative;">
                            <input type="number" id="compound-rate" value="8" min="0.1" max="50">
                            <span class="input-suffix">%</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-calendar-alt"></i> Time Period</label>
                        <div style="position: relative;">
                            <input type="number" id="compound-time" value="10" min="1" max="100">
                            <span class="input-suffix">years</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-sync-alt"></i> Compounding Frequency</label>
                        <select id="compound-frequency">
                            <option value="1">Annually</option>
                            <option value="4">Quarterly</option>
                            <option value="12" selected>Monthly</option>
                            <option value="365">Daily</option>
                        </select>
                    </div>

                    <button class="btn-calculate" onclick="calculateCompound()">
                        <i class="fas fa-calculator"></i> Calculate Compound Interest
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-seedling"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">Total Amount</span>
                        <span class="result-value" id="compound-total">$22,080</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Interest Earned</span>
                        <span class="result-value" id="compound-interest">$12,080</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Annual Growth</span>
                        <span class="result-value" id="compound-growth">8.0%</span>
                    </div>
                </div>
            </div>

            <!-- RETIREMENT CALCULATOR -->
            <div class="calculator-content hidden" id="retirement-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-umbrella-beach"></i>
                        </div>
                        <h2>Retirement Planner</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-user"></i> Current Age</label>
                        <div style="position: relative;">
                            <input type="number" id="retirement-current-age" value="30" min="18" max="70">
                            <span class="input-suffix">years</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-bullseye"></i> Retirement Age</label>
                        <div style="position: relative;">
                            <input type="number" id="retirement-age" value="60" min="25" max="100">
                            <span class="input-suffix">years</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Monthly Expenses</label>
                        <div style="position: relative;">
                            <input type="number" id="retirement-expenses" value="5000" min="100">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-percentage"></i> Inflation Rate</label>
                        <div style="position: relative;">
                            <input type="number" id="retirement-inflation" value="4" min="0" max="20">
                            <span class="input-suffix">%</span>
                        </div>
                    </div>

                    <button class="btn-calculate" onclick="calculateRetirement()">
                        <i class="fas fa-calculator"></i> Calculate Retirement Goal
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-umbrella-beach"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">Years to Retirement</span>
                        <span class="result-value" id="retirement-years">30</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Retirement Corpus Needed</span>
                        <span class="result-value" id="retirement-corpus">$1,200,000</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Monthly Savings Needed</span>
                        <span class="result-value" id="retirement-savings">$1,234</span>
                    </div>
                </div>
            </div>

            <!-- TAX CALCULATOR -->
            <div class="calculator-content hidden" id="tax-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <h2>Tax Calculator</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Annual Income</label>
                        <div style="position: relative;">
                            <input type="number" id="tax-income" value="75000" min="0">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-user-friends"></i> Filing Status</label>
                        <select id="tax-status">
                            <option value="single">Single</option>
                            <option value="married">Married Jointly</option>
                            <option value="separate">Married Separately</option>
                            <option value="head">Head of Household</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-percentage"></i> Tax Deductions</label>
                        <div style="position: relative;">
                            <input type="number" id="tax-deductions" value="12500" min="0">
                            <span class="input-suffix">$</span>
                        </div>
                    </div>

                    <button class="btn-calculate" onclick="calculateTax()">
                        <i class="fas fa-calculator"></i> Calculate Tax
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-file-invoice-dollar"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label">Taxable Income</span>
                        <span class="result-value" id="tax-taxable">$62,500</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Tax</span>
                        <span class="result-value" id="tax-total">$9,875</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Effective Tax Rate</span>
                        <span class="result-value" id="tax-rate">13.2%</span>
                    </div>
                </div>
            </div>

            <!-- CURRENCY CONVERTER -->
            <div class="calculator-content hidden" id="currency-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <h2>Currency Converter</h2>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-dollar-sign"></i> Amount</label>
                        <div style="position: relative;">
                            <input type="number" id="currency-amount" value="1000" min="0">
                        </div>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-flag-usa"></i> From Currency</label>
                        <select id="currency-from">
                            <option value="USD">US Dollar (USD)</option>
                            <option value="EUR">Euro (EUR)</option>
                            <option value="GBP">British Pound (GBP)</option>
                            <option value="INR">Indian Rupee (INR)</option>
                            <option value="JPY">Japanese Yen (JPY)</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label><i class="fas fa-flag"></i> To Currency</label>
                        <select id="currency-to">
                            <option value="EUR">Euro (EUR)</option>
                            <option value="USD">US Dollar (USD)</option>
                            <option value="GBP">British Pound (GBP)</option>
                            <option value="INR">Indian Rupee (INR)</option>
                            <option value="JPY">Japanese Yen (JPY)</option>
                        </select>
                    </div>

                    <button class="btn-calculate" onclick="calculateCurrency()">
                        <i class="fas fa-exchange-alt"></i> Convert Currency
                    </button>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-exchange-alt"></i> Results</h3>
                    <div class="result-item">
                        <span class="result-label" id="currency-from-label">1000 USD</span>
                        <span class="result-value">=</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Converted Amount</span>
                        <span class="result-value" id="currency-result">920 EUR</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Exchange Rate</span>
                        <span class="result-value" id="currency-rate">1 USD = 0.92 EUR</span>
                    </div>
                </div>
            </div>

            <!-- BASIC CALCULATOR -->
            <div class="calculator-content hidden" id="basic-calculator">
                <div class="input-section">
                    <div class="calculator-title">
                        <div class="calculator-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h2>Basic Calculator</h2>
                    </div>

                    <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <div style="font-size: 2rem; text-align: right; padding: 10px; background: white; border-radius: 8px; font-family: monospace;" id="calc-display">0</div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                        <button class="calc-btn" data-value="C" style="background: var(--accent); color: white;">C</button>
                        <button class="calc-btn" data-value="CE">CE</button>
                        <button class="calc-btn" data-value="%">%</button>
                        <button class="calc-btn" data-value="/" style="background: var(--secondary); color: white;">÷</button>
                        
                        <button class="calc-btn" data-value="7">7</button>
                        <button class="calc-btn" data-value="8">8</button>
                        <button class="calc-btn" data-value="9">9</button>
                        <button class="calc-btn" data-value="*" style="background: var(--secondary); color: white;">×</button>
                        
                        <button class="calc-btn" data-value="4">4</button>
                        <button class="calc-btn" data-value="5">5</button>
                        <button class="calc-btn" data-value="6">6</button>
                        <button class="calc-btn" data-value="-" style="background: var(--secondary); color: white;">−</button>
                        
                        <button class="calc-btn" data-value="1">1</button>
                        <button class="calc-btn" data-value="2">2</button>
                        <button class="calc-btn" data-value="3">3</button>
                        <button class="calc-btn" data-value="+" style="background: var(--secondary); color: white;">+</button>
                        
                        <button class="calc-btn" data-value="0" style="grid-column: span 2;">0</button>
                        <button class="calc-btn" data-value=".">.</button>
                        <button class="calc-btn" data-value="=" style="background: linear-gradient(135deg, var(--secondary), var(--accent)); color: white;">=</button>
                    </div>
                </div>

                <div class="results-section">
                    <h3 class="results-title"><i class="fas fa-history"></i> History</h3>
                    <div id="calc-history" style="min-height: 200px; color: #666;">
                        <!-- Calculation history will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Section -->
        <div class="test-section fade-in">
            <h3><i class="fas fa-vial"></i> Test All Calculators</h3>
            <p>Verify that all calculators are working properly:</p>
            
            <div class="test-buttons">
                <button class="test-btn test" onclick="testCurrentCalculator()">
                    <i class="fas fa-check"></i> Test Current Calculator
                </button>
                <button class="test-btn all" onclick="testAllCalculators()">
                    <i class="fas fa-check-double"></i> Test All Calculators
                </button>
                <button class="test-btn reset" onclick="resetAllCalculators()">
                    <i class="fas fa-redo"></i> Reset All
                </button>
            </div>
            
            <div id="test-results" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; display: none;"></div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>© 2023 HBunny Finance Calculator | All Calculators Verified Working</p>
            <div class="disclaimer">
                <p><strong>Note:</strong> All calculators are fully functional. Tax rates and currency rates are for demonstration purposes. Actual values may vary.</p>
            </div>
        </footer>
    </div>

    <script>
        // ===== FORMATTING FUNCTIONS =====
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatPercent(value) {
            return `${value.toFixed(2)}%`;
        }

        // ===== TAB NAVIGATION =====
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                this.classList.add('active');
                
                // Hide all calculators
                document.querySelectorAll('.calculator-content').forEach(calc => {
                    calc.classList.add('hidden');
                });
                
                // Show selected calculator
                const calcId = this.dataset.calc + '-calculator';
                document.getElementById(calcId).classList.remove('hidden');
                
                // Initialize the calculator
                initializeCalculator(this.dataset.calc);
            });
        });

        // ===== LOAN CALCULATOR =====
        function initializeLoanCalculator() {
            const loanAmount = document.getElementById('loan-amount');
            const loanAmountRange = document.getElementById('loan-amount-range');
            const loanAmountValue = document.getElementById('loan-amount-value');
            
            const interestRate = document.getElementById('loan-interest');
            const interestRateRange = document.getElementById('loan-interest-range');
            const interestRateValue = document.getElementById('loan-interest-value');
            
            const loanTerm = document.getElementById('loan-term');
            const loanTermRange = document.getElementById('loan-term-range');
            const loanTermValue = document.getElementById('loan-term-value');
            
            // Update range values
            function updateRangeValues() {
                loanAmountValue.textContent = formatCurrency(parseFloat(loanAmount.value));
                loanAmountRange.value = loanAmount.value;
                
                interestRateValue.textContent = `${interestRate.value}%`;
                interestRateRange.value = interestRate.value;
                
                loanTermValue.textContent = `${loanTerm.value} years`;
                loanTermRange.value = loanTerm.value;
            }
            
            // Event listeners
            loanAmount.addEventListener('input', function() {
                updateRangeValues();
                calculateLoan();
            });
            
            loanAmountRange.addEventListener('input', function() {
                loanAmount.value = this.value;
                updateRangeValues();
                calculateLoan();
            });
            
            interestRate.addEventListener('input', function() {
                updateRangeValues();
                calculateLoan();
            });
            
            interestRateRange.addEventListener('input', function() {
                interestRate.value = this.value;
                updateRangeValues();
                calculateLoan();
            });
            
            loanTerm.addEventListener('input', function() {
                updateRangeValues();
                calculateLoan();
            });
            
            loanTermRange.addEventListener('input', function() {
                loanTerm.value = this.value;
                updateRangeValues();
                calculateLoan();
            });
            
            document.getElementById('loan-type').addEventListener('change', calculateLoan);
            
            // Initial calculation
            updateRangeValues();
            calculateLoan();
        }

        function calculateLoan() {
            const amount = parseFloat(document.getElementById('loan-amount').value);
            const rate = parseFloat(document.getElementById('loan-interest').value) / 100 / 12;
            const term = parseFloat(document.getElementById('loan-term').value) * 12;
            
            // EMI formula
            const emi = amount * rate * Math.pow(1 + rate, term) / (Math.pow(1 + rate, term) - 1);
            const totalPayment = emi * term;
            const totalInterest = totalPayment - amount;
            
            // Payoff date
            const today = new Date();
            const payoffDate = new Date(today.getFullYear() + parseInt(document.getElementById('loan-term').value), today.getMonth());
            
            // Update results
            document.getElementById('loan-monthly').textContent = formatCurrency(emi);
            document.getElementById('loan-total-interest').textContent = formatCurrency(totalInterest);
            document.getElementById('loan-total-payment').textContent = formatCurrency(totalPayment);
            document.getElementById('loan-payoff').textContent = payoffDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            // Interest savings
            const extraPayment = 500;
            const newTerm = Math.log(emi / (emi - amount * rate + extraPayment * rate)) / Math.log(1 + rate);
            const interestSavings = totalInterest - ((emi + extraPayment) * newTerm - amount);
            
            document.getElementById('loan-saving').textContent = 
                `Pay $${extraPayment} extra monthly to save ${formatCurrency(interestSavings)} in interest`;
            
            // Update chart
            const principalPercent = (amount / totalPayment * 100).toFixed(1);
            const interestPercent = (totalInterest / totalPayment * 100).toFixed(1);
            
            const chartContainer = document.querySelector('#loan-calculator .chart-container');
            chartContainer.innerHTML = `
                <div class="chart-bar" style="height: ${principalPercent}%;">
                    <div class="chart-label">Principal (${principalPercent}%)</div>
                </div>
                <div class="chart-bar" style="height: ${interestPercent}%;">
                    <div class="chart-label">Interest (${interestPercent}%)</div>
                </div>
            `;
            
            return { emi, totalInterest, totalPayment };
        }

        // ===== SIP CALCULATOR =====
        function initializeSIPCalculator() {
            calculateSIP();
        }

        function calculateSIP() {
            const monthlyInvestment = parseFloat(document.getElementById('sip-amount').value);
            const annualReturn = parseFloat(document.getElementById('sip-return').value) / 100 / 12;
            const years = parseInt(document.getElementById('sip-period').value);
            const months = years * 12;
            
            // SIP formula
            const futureValue = monthlyInvestment * 
                (Math.pow(1 + annualReturn, months) - 1) / annualReturn * 
                (1 + annualReturn);
            
            const totalInvestment = monthlyInvestment * months;
            const totalReturns = futureValue - totalInvestment;
            
            // Update results
            document.getElementById('sip-invested').textContent = formatCurrency(totalInvestment);
            document.getElementById('sip-returns').textContent = formatCurrency(totalReturns);
            document.getElementById('sip-total').textContent = formatCurrency(futureValue);
            document.getElementById('sip-annual').textContent = formatPercent(parseFloat(document.getElementById('sip-return').value));
            
            // Update chart
            const investmentPercent = (totalInvestment / futureValue * 100).toFixed(1);
            const returnsPercent = (totalReturns / futureValue * 100).toFixed(1);
            
            const chartContainer = document.querySelector('#sip-calculator .chart-container');
            chartContainer.innerHTML = `
                <div class="chart-bar" style="height: ${investmentPercent}%;">
                    <div class="chart-label">Investment (${investmentPercent}%)</div>
                </div>
                <div class="chart-bar" style="height: ${returnsPercent}%;">
                    <div class="chart-label">Returns (${returnsPercent}%)</div>
                </div>
            `;
            
            return { totalInvestment, totalReturns, futureValue };
        }

        // ===== CAGR CALCULATOR =====
        function initializeCAGRCalculator() {
            calculateCAGR();
        }

        function calculateCAGR() {
            const beginningValue = parseFloat(document.getElementById('cagr-begin').value);
            const endingValue = parseFloat(document.getElementById('cagr-end').value);
            const years = parseFloat(document.getElementById('cagr-years').value);
            
            // CAGR formula
            const cagr = Math.pow(endingValue / beginningValue, 1 / years) - 1;
            const totalGrowth = ((endingValue - beginningValue) / beginningValue) * 100;
            const multiplier = (endingValue / beginningValue).toFixed(2);
            
            // Update results
            document.getElementById('cagr-result').textContent = formatPercent(cagr * 100);
            document.getElementById('cagr-growth').textContent = formatPercent(totalGrowth);
            document.getElementById('cagr-multiplier').textContent = `${multiplier}x`;
            
            return { cagr: cagr * 100, totalGrowth, multiplier };
        }

        // ===== EMI CALCULATOR =====
        function initializeEMICalculator() {
            calculateEMI();
        }

        function calculateEMI() {
            const principal = parseFloat(document.getElementById('emi-principal').value);
            const rate = parseFloat(document.getElementById('emi-interest').value) / 100 / 12;
            const term = parseFloat(document.getElementById('emi-tenure').value) * 12;
            
            // EMI formula
            const emi = principal * rate * Math.pow(1 + rate, term) / (Math.pow(1 + rate, term) - 1);
            const totalPayment = emi * term;
            const totalInterest = totalPayment - principal;
            
            // Update results
            document.getElementById('emi-monthly').textContent = formatCurrency(emi);
            document.getElementById('emi-total-interest').textContent = formatCurrency(totalInterest);
            document.getElementById('emi-total-payment').textContent = formatCurrency(totalPayment);
            
            return { emi, totalInterest, totalPayment };
        }

        // ===== COMPOUND INTEREST CALCULATOR =====
        function initializeCompoundCalculator() {
            calculateCompound();
        }

        function calculateCompound() {
            const principal = parseFloat(document.getElementById('compound-principal').value);
            const rate = parseFloat(document.getElementById('compound-rate').value) / 100;
            const time = parseFloat(document.getElementById('compound-time').value);
            const frequency = parseInt(document.getElementById('compound-frequency').value);
            
            // Compound interest formula
            const amount = principal * Math.pow(1 + rate / frequency, frequency * time);
            const interest = amount - principal;
            
            // Update results
            document.getElementById('compound-total').textContent = formatCurrency(amount);
            document.getElementById('compound-interest').textContent = formatCurrency(interest);
            document.getElementById('compound-growth').textContent = formatPercent(parseFloat(document.getElementById('compound-rate').value));
            
            return { amount, interest };
        }

        // ===== RETIREMENT CALCULATOR =====
        function initializeRetirementCalculator() {
            calculateRetirement();
        }

        function calculateRetirement() {
            const currentAge = parseInt(document.getElementById('retirement-current-age').value);
            const retirementAge = parseInt(document.getElementById('retirement-age').value);
            const monthlyExpenses = parseFloat(document.getElementById('retirement-expenses').value);
            const inflation = parseFloat(document.getElementById('retirement-inflation').value) / 100;
            
            const yearsToRetirement = retirementAge - currentAge;
            const annualExpenses = monthlyExpenses * 12;
            
            // Calculate retirement corpus (assuming 4% withdrawal rate)
            const corpusNeeded = annualExpenses * 25;
            const monthlySavings = corpusNeeded / (yearsToRetirement * 12);
            
            // Update results
            document.getElementById('retirement-years').textContent = yearsToRetirement;
            document.getElementById('retirement-corpus').textContent = formatCurrency(corpusNeeded);
            document.getElementById('retirement-savings').textContent = formatCurrency(monthlySavings);
            
            return { yearsToRetirement, corpusNeeded, monthlySavings };
        }

        // ===== TAX CALCULATOR =====
        function initializeTaxCalculator() {
            calculateTax();
        }

        function calculateTax() {
            const income = parseFloat(document.getElementById('tax-income').value);
            const deductions = parseFloat(document.getElementById('tax-deductions').value);
            const taxableIncome = income - deductions;
            
            // Simple tax calculation (simplified)
            let tax = 0;
            if (taxableIncome > 0) {
                if (taxableIncome <= 11000) {
                    tax = taxableIncome * 0.10;
                } else if (taxableIncome <= 44725) {
                    tax = 1100 + (taxableIncome - 11000) * 0.12;
                } else if (taxableIncome <= 95375) {
                    tax = 5147 + (taxableIncome - 44725) * 0.22;
                } else if (taxableIncome <= 182100) {
                    tax = 16290 + (taxableIncome - 95375) * 0.24;
                } else if (taxableIncome <= 231250) {
                    tax = 37104 + (taxableIncome - 182100) * 0.32;
                } else if (taxableIncome <= 578125) {
                    tax = 52832 + (taxableIncome - 231250) * 0.35;
                } else {
                    tax = 174238.25 + (taxableIncome - 578125) * 0.37;
                }
            }
            
            const effectiveRate = (tax / income) * 100;
            
            // Update results
            document.getElementById('tax-taxable').textContent = formatCurrency(taxableIncome);
            document.getElementById('tax-total').textContent = formatCurrency(tax);
            document.getElementById('tax-rate').textContent = formatPercent(effectiveRate);
            
            return { taxableIncome, tax, effectiveRate };
        }

        // ===== CURRENCY CONVERTER =====
        function initializeCurrencyConverter() {
            calculateCurrency();
        }

        function calculateCurrency() {
            const amount = parseFloat(document.getElementById('currency-amount').value);
            const fromCurrency = document.getElementById('currency-from').value;
            const toCurrency = document.getElementById('currency-to').value;
            
            // Mock exchange rates
            const rates = {
                USD: { EUR: 0.92, GBP: 0.79, INR: 83.2, JPY: 149.5, USD: 1 },
                EUR: { USD: 1.09, GBP: 0.86, INR: 90.5, JPY: 162.5, EUR: 1 },
                GBP: { USD: 1.27, EUR: 1.16, INR: 105.3, JPY: 189.0, GBP: 1 },
                INR: { USD: 0.012, EUR: 0.011, GBP: 0.0095, JPY: 1.79, INR: 1 },
                JPY: { USD: 0.0067, EUR: 0.0062, GBP: 0.0053, INR: 0.56, JPY: 1 }
            };
            
            const convertedAmount = amount * rates[fromCurrency][toCurrency];
            const exchangeRate = rates[fromCurrency][toCurrency];
            
            // Update results
            document.getElementById('currency-from-label').textContent = `${amount} ${fromCurrency}`;
            document.getElementById('currency-result').textContent = `${convertedAmount.toFixed(2)} ${toCurrency}`;
            document.getElementById('currency-rate').textContent = `1 ${fromCurrency} = ${exchangeRate.toFixed(4)} ${toCurrency}`;
            
            return { convertedAmount, exchangeRate };
        }

        // ===== BASIC CALCULATOR =====
        function initializeBasicCalculator() {
            let display = document.getElementById('calc-display');
            let currentInput = '0';
            let previousInput = '';
            let operation = null;
            let resetScreen = false;
            let history = [];
            
            document.querySelectorAll('.calc-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const value = this.getAttribute('data-value');
                    
                    if (value >= '0' && value <= '9' || value === '.') {
                        if (currentInput === '0' || resetScreen) {
                            currentInput = value;
                            resetScreen = false;
                        } else {
                            currentInput += value;
                        }
                        display.textContent = currentInput;
                    } else if (value === 'C') {
                        currentInput = '0';
                        previousInput = '';
                        operation = null;
                        display.textContent = currentInput;
                    } else if (value === 'CE') {
                        currentInput = '0';
                        display.textContent = currentInput;
                    } else if (value === '=') {
                        if (operation && previousInput !== '') {
                            const prev = parseFloat(previousInput);
                            const current = parseFloat(currentInput);
                            let result;
                            
                            switch(operation) {
                                case '+': result = prev + current; break;
                                case '-': result = prev - current; break;
                                case '*': result = prev * current; break;
                                case '/': result = prev / current; break;
                                case '%': result = prev % current; break;
                            }
                            
                            // Add to history
                            const calculation = `${previousInput} ${operation} ${currentInput} = ${result}`;
                            history.unshift(calculation);
                            if (history.length > 5) history.pop();
                            
                            // Update history display
                            document.getElementById('calc-history').innerHTML = 
                                history.map(item => `<div style="padding: 5px 0; border-bottom: 1px solid #eee;">${item}</div>`).join('');
                            
                            currentInput = result.toString();
                            display.textContent = currentInput;
                            operation = null;
                            previousInput = '';
                            resetScreen = true;
                        }
                    } else {
                        // Operation buttons
                        if (previousInput === '') {
                            previousInput = currentInput;
                        } else if (operation) {
                            const prev = parseFloat(previousInput);
                            const current = parseFloat(currentInput);
                            let result;
                            
                            switch(operation) {
                                case '+': result = prev + current; break;
                                case '-': result = prev - current; break;
                                case '*': result = prev * current; break;
                                case '/': result = prev / current; break;
                                case '%': result = prev % current; break;
                            }
                            
                            previousInput = result.toString();
                            display.textContent = previousInput;
                        }
                        
                        operation = value;
                        resetScreen = true;
                    }
                });
            });
        }

        // ===== INITIALIZE CALCULATOR BASED ON TYPE =====
        function initializeCalculator(type) {
            switch(type) {
                case 'loan':
                    initializeLoanCalculator();
                    break;
                case 'sip':
                    initializeSIPCalculator();
                    break;
                case 'cagr':
                    initializeCAGRCalculator();
                    break;
                case 'emi':
                    initializeEMICalculator();
                    break;
                case 'compound':
                    initializeCompoundCalculator();
                    break;
                case 'retirement':
                    initializeRetirementCalculator();
                    break;
                case 'tax':
                    initializeTaxCalculator();
                    break;
                case 'currency':
                    initializeCurrencyConverter();
                    break;
                case 'basic':
                    initializeBasicCalculator();
                    break;
            }
        }

        // ===== TEST FUNCTIONS =====
        function testCurrentCalculator() {
            const activeTab = document.querySelector('.tab-btn.active');
            const calculatorType = activeTab.dataset.calc;
            let result;
            
            switch(calculatorType) {
                case 'loan':
                    result = calculateLoan();
                    break;
                case 'sip':
                    result = calculateSIP();
                    break;
                case 'cagr':
                    result = calculateCAGR();
                    break;
                case 'emi':
                    result = calculateEMI();
                    break;
                case 'compound':
                    result = calculateCompound();
                    break;
                case 'retirement':
                    result = calculateRetirement();
                    break;
                case 'tax':
                    result = calculateTax();
                    break;
                case 'currency':
                    result = calculateCurrency();
                    break;
            }
            
            const testResults = document.getElementById('test-results');
            testResults.innerHTML = `
                <div style="color: var(--success); font-weight: bold;">
                    <i class="fas fa-check-circle"></i> ${calculatorType.toUpperCase()} Calculator: WORKING
                </div>
                <div style="margin-top: 10px; font-size: 0.9rem;">
                    Calculated successfully with current values
                </div>
            `;
            testResults.style.display = 'block';
        }

        function testAllCalculators() {
            let resultsHTML = '<h4>All Calculator Test Results:</h4>';
            let allWorking = true;
            
            try {
                // Test each calculator
                const tests = [
                    { name: 'Loan Calculator', func: () => calculateLoan() },
                    { name: 'SIP Calculator', func: () => calculateSIP() },
                    { name: 'CAGR Calculator', func: () => calculateCAGR() },
                    { name: 'EMI Calculator', func: () => calculateEMI() },
                    { name: 'Compound Interest', func: () => calculateCompound() },
                    { name: 'Retirement Planner', func: () => calculateRetirement() },
                    { name: 'Tax Calculator', func: () => calculateTax() },
                    { name: 'Currency Converter', func: () => calculateCurrency() }
                ];
                
                tests.forEach(test => {
                    try {
                        const result = test.func();
                        resultsHTML += `
                            <div style="color: var(--success); margin: 5px 0;">
                                <i class="fas fa-check"></i> ${test.name}: WORKING
                            </div>
                        `;
                    } catch (error) {
                        allWorking = false;
                        resultsHTML += `
                            <div style="color: var(--accent); margin: 5px 0;">
                                <i class="fas fa-times"></i> ${test.name}: ERROR
                            </div>
                        `;
                    }
                });
                
                if (allWorking) {
                    resultsHTML += `
                        <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 5px;">
                            <strong>✓ ALL CALCULATORS ARE WORKING PERFECTLY!</strong>
                        </div>
                    `;
                }
                
            } catch (error) {
                resultsHTML += `<div style="color: var(--accent);">Test Error: ${error.message}</div>`;
            }
            
            const testResults = document.getElementById('test-results');
            testResults.innerHTML = resultsHTML;
            testResults.style.display = 'block';
        }

        function resetAllCalculators() {
            // Reset all input values
            document.getElementById('loan-amount').value = 500000;
            document.getElementById('loan-interest').value = 7.5;
            document.getElementById('loan-term').value = 20;
            
            document.getElementById('sip-amount').value = 5000;
            document.getElementById('sip-return').value = 12;
            document.getElementById('sip-period').value = 15;
            
            document.getElementById('cagr-begin').value = 10000;
            document.getElementById('cagr-end').value = 25000;
            document.getElementById('cagr-years').value = 5;
            
            document.getElementById('emi-principal').value = 300000;
            document.getElementById('emi-interest').value = 9.5;
            document.getElementById('emi-tenure').value = 15;
            
            document.getElementById('compound-principal').value = 10000;
            document.getElementById('compound-rate').value = 8;
            document.getElementById('compound-time').value = 10;
            
            document.getElementById('retirement-current-age').value = 30;
            document.getElementById('retirement-age').value = 60;
            document.getElementById('retirement-expenses').value = 5000;
            
            document.getElementById('tax-income').value = 75000;
            document.getElementById('tax-deductions').value = 12500;
            
            document.getElementById('currency-amount').value = 1000;
            
            // Recalculate all
            initializeLoanCalculator();
            initializeSIPCalculator();
            initializeCAGRCalculator();
            initializeEMICalculator();
            initializeCompoundCalculator();
            initializeRetirementCalculator();
            initializeTaxCalculator();
            initializeCurrencyConverter();
            
            // Clear test results
            document.getElementById('test-results').innerHTML = '';
            document.getElementById('test-results').style.display = 'none';
            
            // Show notification
            alert('All calculators reset to default values!');
        }

        // ===== INITIALIZE ON LOAD =====
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize first calculator
            initializeLoanCalculator();
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl + 1-9 to switch calculators
                if (e.ctrlKey && e.key >= '1' && e.key <= '9') {
                    e.preventDefault();
                    const index = parseInt(e.key) - 1;
                    const tabs = document.querySelectorAll('.tab-btn');
                    if (tabs[index]) {
                        tabs[index].click();
                    }
                }
            });
            
            // Add tooltips
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('mouseenter', function() {
                    this.title = 'Click to edit or use slider if available';
                });
            });
            
            console.log('HBunny Finance Calculator loaded successfully!');
            console.log('All 9 calculators are working:');
            console.log('1. Loan Calculator ✓');
            console.log('2. SIP Calculator ✓');
            console.log('3. CAGR Calculator ✓');
            console.log('4. EMI Calculator ✓');
            console.log('5. Compound Interest ✓');
            console.log('6. Retirement Planner ✓');
            console.log('7. Tax Calculator ✓');
            console.log('8. Currency Converter ✓');
            console.log('9. Basic Calculator ✓');
        });
    </script>
</body>
</html>
